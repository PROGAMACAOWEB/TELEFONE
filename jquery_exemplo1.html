<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title></title>
    <script   src="https://code.jquery.com/jquery-2.2.1.js"   integrity="sha256-eNcUzO3jsv0XlJLveFEkbB8bA7/CroNpNVk3XpmnwHc="   crossorigin="anonymous"></script>
    <style media="screen">
      #lista1,#lista2 {
        background-color: yellow;
        color: navy;
      }
    </style>
  </head>
  <body>
<h1> Lista Telefónica </h1>
<div id="controlo">
<button id="bmostra">Mostra Listas </button>
</div>
<div id="divinput">
  <input type="text" id="inome" placeholder="Insira o nome"/>
  <input type="text" id="iapelido" placeholder="Insira o apelido"/>
  <input type="text" id="itelefone" placeholder="Insira o telefone"/>
  <input type="button" id="binsere" value="insere"/>
</div>
<div id="lista1" class="listaT"></div>
<div id="lista2" class="listaT">
  <ul>
    <li> Pedro Moreira 999888777 </li>
    <li> Paulos Costa 987987978 </li>
    <li> Carlos Silva 987987987 </li>
  </ul>
</div>
  </body>


  <script type="text/javascript">
    var info = [
      {"nome":"Pedro","apelido":"Moreira","telefone":"999888777"},
      {"nome":"Paula","apelido":"Ramos","telefone":"966778865"},
      {"nome":"Carlos","apelido":"Silva","telefone":"912332156"}
    ];

    var info2 = {"lista" :[
      {"nome":"Carla","apelido":"Pereira","telefone":"999888777"},
      {"nome":"Ana","apelido":"Moura","telefone":"966778865"},
      {"nome":"Luís","apelido":"Machado","telefone":"912332156"}
    ]};


    // insere novos registos na lista 3

    $("#binsere").click( function () {
      var nome = $("#inome").val();
      var apelido = $("#iapelido").val();
      var telefone = $("#itelefone").val();
      // verificação simples

      if (nome == "" || telefone == "") {
        alert("tem que introduzir dados");
        return;
      } else {
        // criar um objecto
        var novoregisto = {"nome":nome, "apelido":apelido, "telefone":telefone};
        // inserir na info2
        info2.lista.push(novoregisto);

        console.log(info2);
        refreshlista3();
      };
    });



    // mostra esconde listas
    //document.getElementById("bmostra").addEventListener("click",mostralistas);
    //
    $("#bmostra").click(function () {
      $(".listaT").toggle();
    });


    var lista = $("#lista1");
    //var ul = document.createElement("ul");
    var ul = $("<ul></ul>");

    lista.append(ul);

/*
    for (var i=0; i < info.length ; i++) {
      var novoli = $("<li></li>");
      novoli.html(info[i].nome +
                         " " +
                         info[i].apelido +
                         " " +
                         info[i].telefone);
      ul.append(novoli);
    };
*/
    $.each(info, function (indice, elemento) {
      ul.append($("<li></li>").html(elemento.nome + " " + elemento.apelido + " " + elemento.telefone));
    })



    // criar lista telefonica baseada em info2
    // no meio do div#lista1 e div#lista2

    refreshlista3();

    function refreshlista3 () {

      var lista3 = $("#lista3");
      lista3.remove();

    //var lista3 = document.getElementById("lista3");

//    if (lista3 != null) {
//      document.body.removeChild(lista3);
//    }

    //var divantes = document.getElementById("lista2");

    var divantes = $("#lista2");
    //var novodiv = $("<div class='listaT' id='lista3'></div>");
    var novodiv = $("<div/>");
    novodiv.addClass("listaT");
    novodiv.attr("id","lista3");
/*
    var novodiv = document.createElement("div");
    novodiv.setAttribute("id", "lista3");
    novodiv.setAttribute("class", "listaT");
*/


    var ul = $("<ul/>");
    novodiv.append(ul);
    //var ul = document.createElement("ul");
    //novodiv.appendChild(ul);

    $.each(info2.lista, function (idx,el) {
      ul.append($("<li/>").html(el.nome + " " + el.apelido + " "+ el.telefone));
    });

/*
    for (var i=0; i < info2.lista.length ; i++) {
      var novoli = document.createElement("li");
      novoli.innerHTML = info2.lista[i].nome +
                         " " +
                         info2.lista[i].apelido +
                         " " +
                         info2.lista[i].telefone;
      ul.appendChild(novoli);
    };

*/


    //$($(".listaT")[0]).after(novodiv);

    var primeiro_da_colecao = $(".listaT")[0];
    $(primeiro_da_colecao).after(novodiv);

    //divantes.before(novodiv)
    //document.body.insertBefore(novodiv,divantes);
  }









    //debugger;

  </script>
</html>
